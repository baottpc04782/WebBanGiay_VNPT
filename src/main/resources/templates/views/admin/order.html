<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Order Management</title>
<!--    <link href="/assets/images/logos/logoicon.png" rel="shortcut icon" type="image/png"/>-->
    <link href="/assets/css/styles.min.css" rel="stylesheet"/>
</head>

<body>
<div class="page-wrapper" data-header-position="fixed" data-layout="vertical" data-navbarbg="skin6" data-sidebar-position="fixed"
     data-sidebartype="full" id="main-wrapper">
    <!-- Sidebar Start -->
    <header th:replace="~{/layout1/admin/menu.html::asidebar-admin}"></header>
    <!--  Sidebar End -->
    <!--  Main wrapper -->
    <div class="body-wrapper">
        <!--  Header Start -->
        <header th:replace="~{/layout1/admin/header.html::navbar-admin}"></header>
        <!--  Header End -->
       <div class="container-fluid">
				<div class="card bg-info">
					<div class="card-title m-3 ">
						<div class="row mb-3">
							<h3 class="col-6 my-auto fw-semibold">Order Management</h3>
						<!--	<div class="col-6 head-seach-form">
								<input class="form-control position-relative" placeholder="Search" type="text"> <i
									class="ti ti-search seach-icon-form"></i>
							</div>-->
						</div>
					</div>
					<div class="card-body p-3">
						<div class="col-lg-12 d-flex align-items-stretch">
							<div class="card w-100">
								<div class="card-body p-4">
									<h5 class="card-title fw-semibold mb-4">Recent Information</h5>
									<div class="table-responsive">
										<table class="table text-nowrap mb-0 align-middle">
											<thead class="text-dark fs-4">
												<tr>
													<th class="border-bottom-0">
														<h6 class="fw-semibold mb-0">ID Order</h6>
													</th>
													<th class="border-bottom-0">
														<h6 class="fw-semibold mb-0">Order Date</h6>
													</th>
													<th class="border-bottom-0">
														<h6 class="fw-semibold mb-0">Customer name</h6>
													</th>
													<th class="border-bottom-0">
														<h6 class="fw-semibold mb-0">Address</h6>
													</th>
													<th class="border-bottom-0">
														<h6 class="fw-semibold mb-0">Status</h6>
													</th>
													<th class="border-bottom-0">
														<h6 class="fw-semibold mb-0">Action</h6>
													</th>
												</tr>
											</thead>
											<tbody>
												<th:block th:each="x: ${list}">
													<tr>
														<td class="border-bottom-0">
															<h6 class="fw-semibold mb-0">[(${x.orderId})]</h6>
														</td>
														<td class="border-bottom-0">
															<h6 class="fw-semibold mb-1">[(${x.createDate})]</h6>
														</td>
														<td class="border-bottom-0">
															<h6 class="fw-semibold mb-1">[(${x.accounts.fullname})]</h6>
														</td>
														<td class="border-bottom-0">
															<h6 class="fw-semibold mb-1">[(${x.address})]</h6>
														</td>
														<td class="border-bottom-0">
															<select class="form-select form-select-md" th:id="'status-' + ${x.orderId}" th:value="${x.orderStatus}" th:disabled="${x.orderStatus == 0}">
				                                                <option th:each="status: ${lstStatus}" th:value="${status.key}" th:selected="${x.orderStatus == status.key}">
				                                                    [(${status.value})]
				                                                </option>
				                                            </select>
														</td>
														<td class="border-bottom-0 p-0 text-center">
															<!-- <a th:href="'/admin/orderSee/' + ${x.orderId}"
																class="btn btn-primary" id="detail-see-${x.orderId}">
																Cập nhật
															</a> -->
															<button class="btn btn-primary" th:onclick="'saveList(' + ${x.orderId} + ')'">Cập nhật</button>
														</td>
														<td class="border-bottom-0">
															<a th:href="'/admin/orderSee/' + ${x.orderId}"
																class="btn btn-danger" id="detail-see-${x.orderId}">
																See details
															</a>
														</td>
													</tr>
												</th:block>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						<div class="card-body p-3">
							<div class="col-12 d-flex align-items-stretch card w-100">
								<div class="table-responsive">
									<table class="table text-nowrap mb-0 align-middle">
										<thead class="text-dark fs-6">
											<tr>
												<th class="border-bottom-0">
													<h6 class="fw-semibold mb-0">ID order detail</h6>
												</th>
												<th class="border-bottom-0">
													<h6 class="fw-semibold mb-0">Price</h6>
												</th>
												<th class="border-bottom-0">
													<h6 class="fw-semibold mb-0">Product category</h6>
												</th>
												<th class="border-bottom-0">
													<h6 class="fw-semibold mb-0">Product name</h6>
												</th>
												<th class="border-bottom-0">
													<h6 class="fw-semibold mb-0">Quantity</h6>
												</th>
												<th class="border-bottom-0">
													<h6 class="fw-semibold mb-0">Total</h6>
												</th>
											</tr>
										</thead>
										<tbody>
											<th:block th:each="x: ${listorderdetail}">
												<tr>
													<td class="border-bottom-0">
														<h6 class="fw-semibold mb-0">[(${x.id})]</h6>
													</td>
													<td class="border-bottom-0">
														<h6 class="fw-semibold mb-1">[(${x.Price})]</h6>
													</td>
													<td class="border-bottom-0">
														<h6 class="fw-semibold mb-1">
															[(${x.product.category.CategoryName})]</h6>
													</td>
													<td class="border-bottom-0">
														<h6 class="fw-semibold mb-1">[(${x.product.ProductName})]</h6>
													</td>
													<td class="border-bottom-0">
														<h6 class="fw-semibold mb-1">[(${x.Quantity})]</h6>
													</td>
													<td class="border-bottom-0">
														<h6 class="fw-semibold mb-1">[(${x.Total})]</h6>
													</td>
												</tr>
											</th:block>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

<script src="/assets/libs/jquery/dist/jquery.min.js"></script>
<script src="/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="/assets/js/sidebarmenu.js"></script>
<script src="/assets/js/app.min.js"></script>
<script src="/assets/libs/simplebar/dist/simplebar.js"></script>

<script>
	function saveList(id) {
	    var status = document.getElementById('status-' + id).value;
	    window.location.href = '/admin/order/saveStatus?id=' + id + '&status=' + status;
	}
</script>
</body>

</html>